From stable+bounces-172420-greg=kroah.com@vger.kernel.org Fri Aug 22 16:19:56 2025
From: Sasha Levin <sashal@kernel.org>
Date: Fri, 22 Aug 2025 10:16:13 -0400
Subject: arm64: dts: ti: k3-am62*: Add non-removable flag for eMMC
To: stable@vger.kernel.org
Cc: Judith Mendez <jm@ti.com>, Udit Kumar <u-kumar1@ti.com>, Nishanth Menon <nm@ti.com>, Sasha Levin <sashal@kernel.org>
Message-ID: <20250822141615.1255693-2-sashal@kernel.org>

From: Judith Mendez <jm@ti.com>

[ Upstream commit d16e7d34352c4107a81888e9aab4ea4748076e70 ]

EMMC device is non-removable so add 'non-removable' DT
property to avoid having to redetect the eMMC after
suspend/resume.

Signed-off-by: Judith Mendez <jm@ti.com>
Reviewed-by: Udit Kumar <u-kumar1@ti.com>
Link: https://lore.kernel.org/r/20250429151454.4160506-3-jm@ti.com
Signed-off-by: Nishanth Menon <nm@ti.com>
Stable-dep-of: a0b8da04153e ("arm64: dts: ti: k3-am62*: Move eMMC pinmux to top level board file")
Signed-off-by: Sasha Levin <sashal@kernel.org>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
---
 arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts |    1 +
 arch/arm64/boot/dts/ti/k3-am62p5-sk.dts        |    1 +
 arch/arm64/boot/dts/ti/k3-am62x-sk-common.dtsi |    1 +
 3 files changed, 3 insertions(+)

--- a/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts
+++ b/arch/arm64/boot/dts/ti/k3-am625-beagleplay.dts
@@ -818,6 +818,7 @@
 
 &sdhci0 {
 	bootph-all;
+	non-removable;
 	pinctrl-names = "default";
 	pinctrl-0 = <&emmc_pins_default>;
 	disable-wp;
--- a/arch/arm64/boot/dts/ti/k3-am62p5-sk.dts
+++ b/arch/arm64/boot/dts/ti/k3-am62p5-sk.dts
@@ -444,6 +444,7 @@
 
 &sdhci0 {
 	status = "okay";
+	non-removable;
 	ti,driver-strength-ohm = <50>;
 	disable-wp;
 	bootph-all;
--- a/arch/arm64/boot/dts/ti/k3-am62x-sk-common.dtsi
+++ b/arch/arm64/boot/dts/ti/k3-am62x-sk-common.dtsi
@@ -416,6 +416,7 @@
 &sdhci0 {
 	bootph-all;
 	status = "okay";
+	non-removable;
 	pinctrl-names = "default";
 	pinctrl-0 = <&main_mmc0_pins_default>;
 	disable-wp;
